{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _helperPluginUtils = require(\"@babel/helper-plugin-utils\");\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _core = require(\"@babel/core\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _default = (0, _helperPluginUtils.declare)(api => {\n  api.assertVersion(7);\n\n  function addDisplayName(id, call) {\n    const props = call.arguments[0].properties;\n    let safe = true;\n\n    for (let i = 0; i < props.length; i++) {\n      const prop = props[i];\n\n      const key = _core.types.toComputedKey(prop);\n\n      if (_core.types.isLiteral(key, {\n        value: \"displayName\"\n      })) {\n        safe = false;\n        break;\n      }\n    }\n\n    if (safe) {\n      props.unshift(_core.types.objectProperty(_core.types.identifier(\"displayName\"), _core.types.stringLiteral(id)));\n    }\n  }\n\n  const isCreateClassCallExpression = _core.types.buildMatchMemberExpression(\"React.createClass\");\n\n  const isCreateClassAddon = callee => callee.name === \"createReactClass\";\n\n  function isCreateClass(node) {\n    if (!node || !_core.types.isCallExpression(node)) return false;\n\n    if (!isCreateClassCallExpression(node.callee) && !isCreateClassAddon(node.callee)) {\n      return false;\n    }\n\n    const args = node.arguments;\n    if (args.length !== 1) return false;\n    const first = args[0];\n    if (!_core.types.isObjectExpression(first)) return false;\n    return true;\n  }\n\n  return {\n    name: \"transform-react-display-name\",\n    visitor: {\n      ExportDefaultDeclaration({\n        node\n      }, state) {\n        if (isCreateClass(node.declaration)) {\n          const filename = state.filename || \"unknown\";\n\n          let displayName = _path.default.basename(filename, _path.default.extname(filename));\n\n          if (displayName === \"index\") {\n            displayName = _path.default.basename(_path.default.dirname(filename));\n          }\n\n          addDisplayName(displayName, node.declaration);\n        }\n      },\n\n      CallExpression(path) {\n        const {\n          node\n        } = path;\n        if (!isCreateClass(node)) return;\n        let id;\n        path.find(function (path) {\n          if (path.isAssignmentExpression()) {\n            id = path.node.left;\n          } else if (path.isObjectProperty()) {\n            id = path.node.key;\n          } else if (path.isVariableDeclarator()) {\n            id = path.node.id;\n          } else if (path.isStatement()) {\n            return true;\n          }\n\n          if (id) return true;\n        });\n        if (!id) return;\n\n        if (_core.types.isMemberExpression(id)) {\n          id = id.property;\n        }\n\n        if (_core.types.isIdentifier(id)) {\n          addDisplayName(id.name, node);\n        }\n      }\n\n    }\n  };\n});\n\nexports.default = _default;"]}